var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),me=new Image;me.src="Images/Me.png";var sx=0,sy=0,swidth=1400,sheight=1600,x=50,y=444,width=30,height=30,leftPressed=!1,upPressed=!1,rightPressed=!1,downPressed=!1,left=!0,up=!0,right=!0,down=!0,monster=new Image;monster.src="Images/Monster.png";var monX1=100,monSX1=0,monY1=400,monWidth=60,monHeight=35,monX2=500,monSX2=1600,monY2=400,monX3=460,monSX3=3200,monY3=355,monX4=400,monSX4=4800,monY4=310,monX5=360,monSX5=0,monY5=265,monX6=60,monSX6=1600,monY6=355,monX7=100,monSX7=3200,monY7=310,monX8=160,monSX8=4800,monY8=265,stairX1=300,stairY1=180,stairWidth=120,stairHeight=30,stairX2=40,stairY2=180,stairX3=100,stairY3=136,stairX4=400,stairY4=136,stairX5=480,stairY5=92,stairX6=60,stairY6=92,stairX7=120,stairY7=48,stairX8=500,stairY8=48,bed=new Image;bed.src="Images/Bed.png";var bedWidth=45,bedHeight=30,bedX=481*Math.random()+20,bedY=4,toBed=!1,lives=3,livesLost=0,play=!0,victoryCondition=!1;function keyDownHandler(t){37==t.keyCode&&(leftPressed=!0),38==t.keyCode&&(upPressed=!0),39==t.keyCode&&(rightPressed=!0),40==t.keyCode&&(downPressed=!0)}function keyUpHandler(t){37==t.keyCode&&(leftPressed=!1),38==t.keyCode&&(upPressed=!1),39==t.keyCode&&(rightPressed=!1),40==t.keyCode&&(downPressed=!1)}function drawBackground(){ctx.fillStyle="maroon",ctx.fillRect(0,440,570,45),ctx.fillRect(0,220,570,45),ctx.beginPath(),ctx.moveTo(0,395),ctx.lineTo(570,395),ctx.strokeStyle="black",ctx.setLineDash([10]),ctx.strokeWidth=2,ctx.stroke(),ctx.beginPath(),ctx.moveTo(0,350),ctx.lineTo(570,350),ctx.strokeStyle="black",ctx.setLineDash([10]),ctx.strokeWidth=4,ctx.stroke(),ctx.beginPath(),ctx.moveTo(0,305),ctx.lineTo(570,305),ctx.strokeStyle="black",ctx.setLineDash([10]),ctx.strokeWidth=2,ctx.stroke(),ctx.fillStyle="saddlebrown",ctx.fillRect(0,0,570,220)}function drawMe(){ctx.drawImage(me,sx,sy,swidth,sheight,x,y,width,height)}function moveMe(){1==leftPressed&&1==left&&20<x&&(x-=44,left=!1,sx=2900),0==leftPressed&&(left=!0),1==upPressed&&1==up&&20<y&&(y-=44,up=!1,sx=0),0==upPressed&&(up=!0),1==rightPressed&&1==right&&x+width<canvas.width-20&&(x+=44,right=!1,sx=1500),0==rightPressed&&(right=!0),1==downPressed&&1==down&&y+height<canvas.height-80&&(y+=44,down=!1,sx=0),0==downPressed&&(down=!0)}function drawMonsters(){var t=[monSX1,monSX2,monSX3,monSX4,monSX5,monSX6,monSX7,monSX8],a=[monX1,monX2,monX3,monX4,monX5,monX6,monX7,monX8],s=[monY1,monY2,monY3,monY4,monY5,monY6,monY7,monY8];for(i=0;i<a.length;i++)ctx.drawImage(monster,t[i],0,1500,800,a[i],s[i],monWidth,monHeight)}function moveMonsters(){monX1<canvas.width+100?monX1+=5:(monX1=-100,monSX1=1600*Math.floor(4*Math.random())),monX2<canvas.width+100?monX2+=5:(monX2=-100,monSX2=1600*Math.floor(4*Math.random())),-100<monX3?monX3-=5:(monX3=canvas.width+100,monSX3=1600*Math.floor(4*Math.random())),-100<monX6?monX6-=5:(monX6=canvas.width+100,monSX6=1600*Math.floor(4*Math.random())),monX4<canvas.width+100?monX4+=5:(monX4=-100,monSX4=1600*Math.floor(4*Math.random())),monX7<canvas.width+100?monX7+=5:(monX7=-100,monSX7=1600*Math.floor(4*Math.random())),-100<monX5?monX5-=5:(monX5=canvas.width+100,monSX5=1600*Math.floor(4*Math.random())),-100<monX8?monX8-=5:(monX8=canvas.width+100,monSX8=1600*Math.floor(4*Math.random()))}function hit(){var t=[monX1,monX2,monX3,monX4,monX5,monX6,monX7,monX8],a=[monY1,monY2,monY3,monY4,monY5,monY6,monY7,monY8];for(i=0;i<t.length;i++)t[i]<=x+width&&t[i]+monWidth>=x&&a[i]+monHeight>=y&&a[i]<=y+height&&(sx=4200,y=488,livesLost++)}function drawStairs(){ctx.fillStyle="chocolate";var t=[stairX1,stairX2,stairX3,stairX4,stairX5,stairX6,stairX7,stairX8],a=[stairY1,stairY2,stairY3,stairY4,stairY5,stairY6,stairY7,stairY8];for(i=0;i<t.length;i++)ctx.fillRect(t[i],a[i],stairWidth,stairHeight)}function moveStairs(){stairX1<canvas.width+100?stairX1+=2:stairX1=-100,stairX2<canvas.width+100?stairX2+=2:stairX2=-100,0-stairWidth<stairX3?stairX3-=2:stairX3=canvas.width+100,0-stairWidth<stairX4?stairX4-=2:stairX4=canvas.width+100,stairX5<canvas.width+100?stairX5+=3:stairX5=-100,stairX6<canvas.width+100?stairX6+=3:stairX6=-100,0-stairWidth<stairX7?stairX7-=3:stairX7=canvas.width+100,0-stairWidth<stairX8?stairX8-=3:stairX8=canvas.width+100}function land(){stairX1<=x+width&&x<=stairX1+stairWidth&&y<=stairY1+stairHeight&&stairY1<=y+height?x<canvas.width-30&&(x+=2):stairX2<=x+width&&x<=stairX2+stairWidth&&y<=stairY2+stairHeight&&stairY2<=y+height?x<canvas.width-30&&(x+=2):stairX3<=x+width&&x<=stairX3+stairWidth&&y<=stairY3+stairHeight&&stairY3<=y+height?0<x&&(x-=2):stairX4<=x+width&&x<=stairX4+stairWidth&&y<=stairY4+stairHeight&&stairY4<=y+height?0<x&&(x-=2):stairX5<=x+width&&x<=stairX5+stairWidth&&y<=stairY5+stairHeight&&stairY5<=y+height?x<canvas.width-30&&(x+=3):stairX6<=x+width&&x<=stairX6+stairWidth&&y<=stairY6+stairHeight&&stairY6<=y+height?x<canvas.width-30&&(x+=3):stairX7<=x+width&&x<=stairX7+stairWidth&&y<=stairY7+stairHeight&&stairY7<=y+height?0<x&&(x-=3):stairX8<=x+width&&x<=stairX8+stairWidth&&y<=stairY8+stairHeight&&stairY8<=y+height?0<x&&(x-=3):y<220&&44<y&&(sx=4200,y=488,livesLost++)}function drawBed(){ctx.drawImage(bed,0,0,1e3,650,bedX,bedY,bedWidth,bedHeight)}function onBed(){bedX<=x+width&&x<=bedX+bedWidth&&y<=bedY+bedHeight&&bedY<=y+height?toBed=!0:y<48&&(sx=4200,y=488,livesLost++)}function drawLives(){lives-livesLost!=0&&(ctx.fillStyle="white",ctx.font="30px Arial",ctx.fillText("Lives: "+(lives-livesLost),0,525))}function victory(){!0===toBed&&(play=!1,ctx.fillStyle="yellow",ctx.font="30px Arial",ctx.fillText("#1 Victory Royale!",150,100),victoryCondition=!0)}function gameOver(){lives-livesLost==0&&(play=!1,ctx.fillStyle="firebrick",ctx.font="72px Arial",ctx.fillText("YOU DIED",110,300))}function draw(){ctx.clearRect(0,0,canvas.width,canvas.height),!1===victoryCondition&&(gameOver(),drawLives()),play&&(drawBackground(),drawStairs(),moveStairs(),drawBed(),onBed(),drawMe(),moveMe(),drawMonsters(),moveMonsters(),hit(),land()),victory(),requestAnimationFrame(draw)}document.addEventListener("keydown",keyDownHandler,!1),document.addEventListener("keyup",keyUpHandler,!1),draw();